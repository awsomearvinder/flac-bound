<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `FLAC__StreamDecoderReadCallback` type in crate `flac_sys`."><meta name="keywords" content="rust, rustlang, rust-lang, FLAC__StreamDecoderReadCallback"><title>flac_sys::FLAC__StreamDecoderReadCallback - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../dark.css"><link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle"><script src="../storage.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="shortcut icon" href="../favicon.ico"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc type"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../flac_sys/index.html'><div class='logo-container'><img src='../rust-logo.png' alt='logo'></div></a><p class='location'>Type Definition FLAC__StreamDecoderReadCallback</p><div class="sidebar-elems"><p class='location'><a href='index.html'>flac_sys</a></p><script>window.sidebarCurrent = {name: 'FLAC__StreamDecoderReadCallback', ty: 'type', relpath: ''};</script><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><a id="settings-menu" href="../settings.html"><img src="../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class='fqn'><span class='out-of-band'><span id='render-detail'><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class='inner'>&#x2212;</span>]</a></span><a class='srclink' href='../src/flac_sys/lib.rs.html#5048-5055' title='goto source code'>[src]</a></span><span class='in-band'>Type Definition <a href='index.html'>flac_sys</a>::<wbr><a class="type" href=''>FLAC__StreamDecoderReadCallback</a></span></h1><pre class='rust typedef'>type FLAC__StreamDecoderReadCallback = <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;unsafe extern &quot;C&quot; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.fn.html">fn</a>(decoder: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.pointer.html">*const </a><a class="struct" href="../flac_sys/struct.FLAC__StreamDecoder.html" title="struct flac_sys::FLAC__StreamDecoder">FLAC__StreamDecoder</a>, buffer: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.pointer.html">*mut </a><a class="type" href="../flac_sys/type.FLAC__byte.html" title="type flac_sys::FLAC__byte">FLAC__byte</a>, bytes: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.pointer.html">*mut </a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, client_data: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.pointer.html">*mut </a><a class="enum" href="https://doc.rust-lang.org/nightly/core/ffi/enum.c_void.html" title="enum core::ffi::c_void">c_void</a>) -&gt; <a class="type" href="../flac_sys/type.FLAC__StreamDecoderReadStatus.html" title="type flac_sys::FLAC__StreamDecoderReadStatus">FLAC__StreamDecoderReadStatus</a>&gt;;</pre><div class='docblock'><p>Signature for the read callback.</p>
<p>A function pointer matching this signature must be passed to
FLAC__stream_decoder_init*_stream(). The supplied function will be
called when the decoder needs more input data.  The address of the
buffer to be filled is supplied, along with the number of bytes the
buffer can hold.  The callback may choose to supply less data and
modify the byte count but must be careful not to overflow the buffer.
The callback then returns a status code chosen from
FLAC__StreamDecoderReadStatus.</p>
<p>Here is an example of a read callback for stdio streams:
\code
FLAC__StreamDecoderReadStatus read_cb(const FLAC__StreamDecoder *decoder, FLAC__byte buffer[], size_t *bytes, void *client_data)
{
FILE <em>file = ((MyClientData</em>)client_data)-&gt;file;
if(*bytes &gt; 0) {
*bytes = fread(buffer, sizeof(FLAC__byte), *bytes, file);
if(ferror(file))
return FLAC__STREAM_DECODER_READ_STATUS_ABORT;
else if(*bytes == 0)
return FLAC__STREAM_DECODER_READ_STATUS_END_OF_STREAM;
else
return FLAC__STREAM_DECODER_READ_STATUS_CONTINUE;
}
else
return FLAC__STREAM_DECODER_READ_STATUS_ABORT;
}
\endcode</p>
<p>\note In general, FLAC__StreamDecoder functions which change the
state should not be called on the \a decoder while in the callback.</p>
<p>\param  decoder  The decoder instance calling the callback.
\param  buffer   A pointer to a location for the callee to store
data to be decoded.
\param  bytes    A pointer to the size of the buffer.  On entry
to the callback, it contains the maximum number
of bytes that may be stored in \a buffer.  The
callee must set it to the actual number of bytes
stored (0 in case of error or end-of-stream) before
returning.
\param  client_data  The callee's client data set through
FLAC__stream_decoder_init_*().
\retval FLAC__StreamDecoderReadStatus
The callee's return status.  Note that the callback should return
\c FLAC__STREAM_DECODER_READ_STATUS_END_OF_STREAM if and only if
zero bytes were read and there is no more data to be read.</p>
</div></section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../";window.currentCrate = "flac_sys";</script><script src="../aliases.js"></script><script src="../main.js"></script><script defer src="../search-index.js"></script></body></html>